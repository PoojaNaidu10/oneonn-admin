{"version":3,"file":"index.umd.js","sources":["../src/BubbleMenu.ts","../src/Editor.ts","../src/EditorContent.ts","../src/FloatingMenu.ts","../src/NodeViewContent.ts","../src/NodeViewWrapper.ts","../src/VueRenderer.ts","../src/VueNodeViewRenderer.ts"],"sourcesContent":["import { BubbleMenuPlugin, BubbleMenuPluginProps } from '@tiptap/extension-bubble-menu'\nimport Vue, { Component, CreateElement, PropType } from 'vue'\n\nexport interface BubbleMenuInterface extends Vue {\n  pluginKey: BubbleMenuPluginProps['pluginKey'],\n  editor: BubbleMenuPluginProps['editor'],\n  tippyOptions: BubbleMenuPluginProps['tippyOptions'],\n  updateDelay: BubbleMenuPluginProps['updateDelay'],\n  shouldShow: BubbleMenuPluginProps['shouldShow'],\n}\n\nexport const BubbleMenu: Component = {\n  name: 'BubbleMenu',\n\n  props: {\n    pluginKey: {\n      type: [String, Object as PropType<Exclude<BubbleMenuPluginProps['pluginKey'], string>>],\n      default: 'bubbleMenu',\n    },\n\n    editor: {\n      type: Object as PropType<BubbleMenuPluginProps['editor']>,\n      required: true,\n    },\n\n    updateDelay: {\n      type: Number as PropType<BubbleMenuPluginProps['updateDelay']>,\n    },\n\n    tippyOptions: {\n      type: Object as PropType<BubbleMenuPluginProps['tippyOptions']>,\n      default: () => ({}),\n    },\n\n    shouldShow: {\n      type: Function as PropType<Exclude<BubbleMenuPluginProps['shouldShow'], null>>,\n      default: null,\n    },\n  },\n\n  watch: {\n    editor: {\n      immediate: true,\n      handler(this: BubbleMenuInterface, editor: BubbleMenuPluginProps['editor']) {\n        if (!editor) {\n          return\n        }\n\n        this.$nextTick(() => {\n          editor.registerPlugin(BubbleMenuPlugin({\n            updateDelay: this.updateDelay,\n            editor,\n            element: this.$el as HTMLElement,\n            pluginKey: this.pluginKey,\n            shouldShow: this.shouldShow,\n            tippyOptions: this.tippyOptions,\n          }))\n        })\n      },\n    },\n  },\n\n  render(this: BubbleMenuInterface, createElement: CreateElement) {\n    return createElement('div', { style: { visibility: 'hidden' } }, this.$slots.default)\n  },\n\n  beforeDestroy(this: BubbleMenuInterface) {\n    this.editor.unregisterPlugin(this.pluginKey)\n  },\n}\n","import { Editor as CoreEditor } from '@tiptap/core'\nimport Vue from 'vue'\n\nexport class Editor extends CoreEditor {\n  public contentComponent: Vue | null = null\n}\n","import Vue, { Component, CreateElement, PropType } from 'vue'\n\nimport { Editor } from './Editor.js'\n\nexport interface EditorContentInterface extends Vue {\n  editor: Editor,\n}\n\nexport const EditorContent: Component = {\n  name: 'EditorContent',\n\n  props: {\n    editor: {\n      default: null,\n      type: Object as PropType<Editor>,\n    },\n  },\n\n  watch: {\n    editor: {\n      immediate: true,\n      handler(this: EditorContentInterface, editor: Editor) {\n        if (editor && editor.options.element) {\n          this.$nextTick(() => {\n            const element = this.$el\n\n            if (!element || !editor.options.element.firstChild) {\n              return\n            }\n\n            element.append(...editor.options.element.childNodes)\n            editor.contentComponent = this\n\n            editor.setOptions({\n              element,\n            })\n\n            editor.createNodeViews()\n          })\n        }\n      },\n    },\n  },\n\n  render(createElement: CreateElement) {\n    return createElement('div')\n  },\n\n  beforeDestroy(this: EditorContentInterface) {\n    const { editor } = this\n\n    if (!editor) {\n      return\n    }\n\n    if (!editor.isDestroyed) {\n      editor.view.setProps({\n        nodeViews: {},\n      })\n    }\n\n    editor.contentComponent = null\n\n    if (!editor.options.element.firstChild) {\n      return\n    }\n\n    const newElement = document.createElement('div')\n\n    newElement.append(...editor.options.element.childNodes)\n\n    editor.setOptions({\n      element: newElement,\n    })\n  },\n}\n","import { FloatingMenuPlugin, FloatingMenuPluginProps } from '@tiptap/extension-floating-menu'\nimport Vue, { Component, CreateElement, PropType } from 'vue'\n\nexport interface FloatingMenuInterface extends Vue {\n  pluginKey: FloatingMenuPluginProps['pluginKey'],\n  tippyOptions: FloatingMenuPluginProps['tippyOptions'],\n  editor: FloatingMenuPluginProps['editor'],\n  shouldShow: FloatingMenuPluginProps['shouldShow'],\n}\n\nexport const FloatingMenu: Component = {\n  name: 'FloatingMenu',\n\n  props: {\n    pluginKey: {\n      type: [String, Object as PropType<Exclude<FloatingMenuPluginProps['pluginKey'], string>>],\n      default: 'floatingMenu',\n    },\n\n    editor: {\n      type: Object as PropType<FloatingMenuPluginProps['editor']>,\n      required: true,\n    },\n\n    tippyOptions: {\n      type: Object as PropType<FloatingMenuPluginProps['tippyOptions']>,\n      default: () => ({}),\n    },\n\n    shouldShow: {\n      type: Function as PropType<Exclude<FloatingMenuPluginProps['shouldShow'], null>>,\n      default: null,\n    },\n  },\n\n  watch: {\n    editor: {\n      immediate: true,\n      handler(this: FloatingMenuInterface, editor: FloatingMenuPluginProps['editor']) {\n        if (!editor) {\n          return\n        }\n\n        this.$nextTick(() => {\n          editor.registerPlugin(FloatingMenuPlugin({\n            pluginKey: this.pluginKey,\n            editor,\n            element: this.$el as HTMLElement,\n            tippyOptions: this.tippyOptions,\n            shouldShow: this.shouldShow,\n          }))\n        })\n      },\n    },\n  },\n\n  render(this: FloatingMenuInterface, createElement: CreateElement) {\n    return createElement('div', { style: { visibility: 'hidden' } }, this.$slots.default)\n  },\n\n  beforeDestroy(this: FloatingMenuInterface) {\n    this.editor.unregisterPlugin(this.pluginKey)\n  },\n}\n","import Vue, { Component, CreateElement } from 'vue'\n\nexport interface NodeViewContentInterface extends Vue {\n  as: string,\n}\n\nexport const NodeViewContent: Component = {\n  props: {\n    as: {\n      type: String,\n      default: 'div',\n    },\n  },\n\n  render(this: NodeViewContentInterface, createElement: CreateElement) {\n    return createElement(this.as, {\n      style: {\n        whiteSpace: 'pre-wrap',\n      },\n      attrs: {\n        'data-node-view-content': '',\n      },\n    })\n  },\n}\n","import Vue, { Component, CreateElement } from 'vue'\n\nexport interface NodeViewWrapperInterface extends Vue {\n  as: string,\n  decorationClasses: {\n    value: string,\n  },\n  onDragStart: () => void,\n}\n\nexport const NodeViewWrapper: Component = {\n  props: {\n    as: {\n      type: String,\n      default: 'div',\n    },\n  },\n\n  inject: ['onDragStart', 'decorationClasses'],\n\n  render(this: NodeViewWrapperInterface, createElement: CreateElement) {\n    return createElement(\n      this.as,\n      {\n        class: this.decorationClasses.value,\n        style: {\n          whiteSpace: 'normal',\n        },\n        attrs: {\n          'data-node-view-wrapper': '',\n        },\n        on: {\n          dragstart: this.onDragStart,\n        },\n      },\n      this.$slots.default,\n    )\n  },\n}\n","import Vue from 'vue'\nimport { VueConstructor } from 'vue/types/umd'\n\n/**\n * The VueRenderer class is responsible for rendering a Vue component as a ProseMirror node view.\n */\nexport class VueRenderer {\n  ref!: Vue\n\n  constructor(component: Vue | VueConstructor, props: any) {\n    const Component = (typeof component === 'function') ? component : Vue.extend(component)\n\n    this.ref = new Component(props).$mount()\n  }\n\n  get element(): Element {\n    return this.ref.$el\n  }\n\n  updateProps(props: Record<string, any> = {}): void {\n    if (!this.ref.$props) {\n      return\n    }\n\n    // prevents `Avoid mutating a prop directly` error message\n    // Fix: `VueNodeViewRenderer` change vue Constructor `config.silent` not working\n    const currentVueConstructor = this.ref.$props.editor?.contentComponent?.$options._base ?? Vue // eslint-disable-line\n    const originalSilent = currentVueConstructor.config.silent\n\n    currentVueConstructor.config.silent = true\n\n    Object\n      .entries(props)\n      .forEach(([key, value]) => {\n        this.ref.$props[key] = value\n      })\n\n    currentVueConstructor.config.silent = originalSilent\n  }\n\n  destroy(): void {\n    this.ref.$destroy()\n  }\n}\n","import {\n  DecorationWithType,\n  NodeView,\n  NodeViewProps,\n  NodeViewRenderer,\n  NodeViewRendererOptions,\n} from '@tiptap/core'\nimport { Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport { Decoration, DecorationSource, NodeView as ProseMirrorNodeView } from '@tiptap/pm/view'\nimport Vue from 'vue'\nimport { VueConstructor } from 'vue/types/umd'\nimport { booleanProp, functionProp, objectProp } from 'vue-ts-types'\n\nimport { Editor } from './Editor.js'\nimport { VueRenderer } from './VueRenderer.js'\n\nexport const nodeViewProps = {\n  editor: objectProp<NodeViewProps['editor']>().required,\n  node: objectProp<NodeViewProps['node']>().required,\n  decorations: objectProp<NodeViewProps['decorations']>().required,\n  selected: booleanProp().required,\n  extension: objectProp<NodeViewProps['extension']>().required,\n  getPos: functionProp<NodeViewProps['getPos']>().required,\n  updateAttributes: functionProp<NodeViewProps['updateAttributes']>().required,\n  deleteNode: functionProp<NodeViewProps['deleteNode']>().required,\n}\n\nexport interface VueNodeViewRendererOptions extends NodeViewRendererOptions {\n  update:\n    | ((props: {\n      oldNode: ProseMirrorNode;\n      oldDecorations: readonly Decoration[];\n      oldInnerDecorations: DecorationSource;\n      newNode: ProseMirrorNode;\n      newDecorations: readonly Decoration[];\n      innerDecorations: DecorationSource;\n      updateProps: () => void;\n      }) => boolean)\n    | null;\n}\n\nclass VueNodeView extends NodeView<Vue | VueConstructor, Editor, VueNodeViewRendererOptions> {\n  renderer!: VueRenderer\n\n  decorationClasses!: {\n    value: string;\n  }\n\n  mount() {\n    const props = {\n      editor: this.editor,\n      node: this.node,\n      decorations: this.decorations as DecorationWithType[],\n      innerDecorations: this.innerDecorations,\n      view: this.view,\n      selected: false,\n      extension: this.extension,\n      HTMLAttributes: this.HTMLAttributes,\n      getPos: () => this.getPos(),\n      updateAttributes: (attributes = {}) => this.updateAttributes(attributes),\n      deleteNode: () => this.deleteNode(),\n    } satisfies NodeViewProps\n\n    const onDragStart = this.onDragStart.bind(this)\n\n    this.decorationClasses = Vue.observable({\n      value: this.getDecorationClasses(),\n    })\n\n    // @ts-ignore\n    const vue = this.editor.contentComponent?.$options._base ?? Vue; // eslint-disable-line\n\n    const Component = vue.extend(this.component).extend({\n      props: Object.keys(props),\n      provide: () => {\n        return {\n          onDragStart,\n          decorationClasses: this.decorationClasses,\n        }\n      },\n    })\n\n    this.handleSelectionUpdate = this.handleSelectionUpdate.bind(this)\n    this.editor.on('selectionUpdate', this.handleSelectionUpdate)\n\n    this.renderer = new VueRenderer(Component, {\n      parent: this.editor.contentComponent,\n      propsData: props,\n    })\n  }\n\n  /**\n   * Return the DOM element.\n   * This is the element that will be used to display the node view.\n   */\n  get dom() {\n    if (!this.renderer.element.hasAttribute('data-node-view-wrapper')) {\n      throw Error('Please use the NodeViewWrapper component for your node view.')\n    }\n\n    return this.renderer.element as HTMLElement\n  }\n\n  /**\n   * Return the content DOM element.\n   * This is the element that will be used to display the rich-text content of the node.\n   */\n  get contentDOM() {\n    if (this.node.isLeaf) {\n      return null\n    }\n\n    const contentElement = this.dom.querySelector('[data-node-view-content]')\n\n    return (contentElement || this.dom) as HTMLElement | null\n  }\n\n  /**\n   * On editor selection update, check if the node is selected.\n   * If it is, call `selectNode`, otherwise call `deselectNode`.\n   */\n  handleSelectionUpdate() {\n    const { from, to } = this.editor.state.selection\n    const pos = this.getPos()\n\n    if (typeof pos !== 'number') {\n      return\n    }\n\n    if (from <= pos && to >= pos + this.node.nodeSize) {\n      if (this.renderer.ref.$props.selected) {\n        return\n      }\n\n      this.selectNode()\n    } else {\n      if (!this.renderer.ref.$props.selected) {\n        return\n      }\n\n      this.deselectNode()\n    }\n  }\n\n  /**\n   * On update, update the React component.\n   * To prevent unnecessary updates, the `update` option can be used.\n   */\n  update(\n    node: ProseMirrorNode,\n    decorations: readonly Decoration[],\n    innerDecorations: DecorationSource,\n  ): boolean {\n    const rerenderComponent = (props?: Record<string, any>) => {\n      this.decorationClasses.value = this.getDecorationClasses()\n      this.renderer.updateProps(props)\n    }\n\n    if (typeof this.options.update === 'function') {\n      const oldNode = this.node\n      const oldDecorations = this.decorations\n      const oldInnerDecorations = this.innerDecorations\n\n      this.node = node\n      this.decorations = decorations\n      this.innerDecorations = innerDecorations\n\n      return this.options.update({\n        oldNode,\n        oldDecorations,\n        newNode: node,\n        newDecorations: decorations,\n        oldInnerDecorations,\n        innerDecorations,\n        updateProps: () => rerenderComponent({ node, decorations, innerDecorations }),\n      })\n    }\n\n    if (node.type !== this.node.type) {\n      return false\n    }\n\n    if (node === this.node && this.decorations === decorations && this.innerDecorations === innerDecorations) {\n      return true\n    }\n\n    this.node = node\n    this.decorations = decorations\n    this.innerDecorations = innerDecorations\n\n    rerenderComponent({ node, decorations, innerDecorations })\n\n    return true\n  }\n\n  /**\n   * Select the node.\n   * Add the `selected` prop and the `ProseMirror-selectednode` class.\n   */\n  selectNode() {\n    this.renderer.updateProps({\n      selected: true,\n    })\n    this.renderer.element.classList.add('ProseMirror-selectednode')\n  }\n\n  /**\n   * Deselect the node.\n   * Remove the `selected` prop and the `ProseMirror-selectednode` class.\n   */\n  deselectNode() {\n    this.renderer.updateProps({\n      selected: false,\n    })\n    this.renderer.element.classList.remove('ProseMirror-selectednode')\n  }\n\n  getDecorationClasses() {\n    return (\n      this.decorations\n        // @ts-ignore\n        .map(item => item.type.attrs.class)\n        .flat()\n        .join(' ')\n    )\n  }\n\n  destroy() {\n    this.renderer.destroy()\n    this.editor.off('selectionUpdate', this.handleSelectionUpdate)\n  }\n}\n\nexport function VueNodeViewRenderer(\n  component: Vue | VueConstructor,\n  options?: Partial<VueNodeViewRendererOptions>,\n): NodeViewRenderer {\n  return props => {\n    // try to get the parent component\n    // this is important for vue devtools to show the component hierarchy correctly\n    // maybe it’s `undefined` because <editor-content> isn’t rendered yet\n    if (!(props.editor as Editor).contentComponent) {\n      return {} as unknown as ProseMirrorNodeView\n    }\n\n    return new VueNodeView(component, props, options)\n  }\n}\n"],"names":["BubbleMenuPlugin","CoreEditor","FloatingMenuPlugin","objectProp","booleanProp","functionProp","NodeView"],"mappings":"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"}