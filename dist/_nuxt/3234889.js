(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{712:function(e,t,n){"use strict";n.r(t);var r=n(219),o=n(940),l=n(656),c=n(947),d=n(184),m=n(175),f=n(18),v=n(144),_=n(28),h=(n(97),n(40),n(13),n(179),n(39),n(27),n(6),n(57),n(58),n(146)),y={data:function(){return{imageIssues:"",isLoading:!1,render:Date.now()+Math.floor(1e4*Math.random()+1)}},props:{image_width:{type:Number},image_height:{type:Number},errorMessage:{type:String},value:{type:Array|String},image_size:{type:Number,default:5},not_image:{type:Boolean,default:!1},no_hint:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},UploadAPI:{type:Function,required:!0},no_preview:{type:Boolean,default:!1},button_text:{type:String,default:"Upload image"},rounded_button_style:{type:Boolean,default:!1},filetype:{type:String|Array,default:"image/webp"}},methods:{HandleFileUpload:function(e){var t=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var r,o,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.isLoading=!0,!t.multiple){n.next=10;break}return r=Object(h.map)(e,function(){var e=Object(_.a)(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ValidateImageDimensions(n);case 2:if(e.t0=e.sent,!e.t0){e.next=7;break}return e.next=6,t.ValidateImageSize(n);case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=22;break}return(r=new FormData).append("file",n,n.name),e.prev=10,e.next=13,t.UploadAPI(r);case 13:return o=e.sent,console.log("response nimage,",o),e.abrupt("return",o.data.payload.imageUrl);case 18:return e.prev=18,e.t1=e.catch(10),console.log(e.t1),e.abrupt("return",null);case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()),n.next=5,Promise.all(r);case 5:o=(o=n.sent).filter((function(e){return null!==e})),t.value?(t.$emit("input",[].concat(Object(v.a)(t.value),Object(v.a)(o))),t.$emit("change")):(t.$emit("input",o),t.$emit("change")),n.next=50;break;case 10:if(console.log("else conditon"),!e){n.next=50;break}return console.log("if files else"),n.next=15,t.ValidateImageDimensions(e);case 15:if(n.t0=n.sent,!n.t0){n.next=20;break}return n.next=19,t.ValidateImageSize(e);case 19:n.t0=n.sent;case 20:if(!n.t0){n.next=50;break}return console.log("if inside funtion"),l=new FormData,console.log("if inside funtion11"),l.append("file",e,e.name),console.log("if inside funtion 22",e.name),n.prev=26,n.next=29,t.UploadAPI(l);case 29:c=n.sent,console.log("if inside funtion 33"),n.t1=regeneratorRuntime.keys(c.data.payload);case 32:if((n.t2=n.t1()).done){n.next=42;break}if(d=n.t2.value,console.log("if inside funtion 44",c.data.payload),0==c.data.payload[d].length||"message"==d){n.next=40;break}return console.log("if inside funtion 44",c.data.payload[d].length),t.$emit("error",c.data.payload),console.log("if inside funtion 55",c.data.payload),n.abrupt("break",42);case 40:n.next=32;break;case 42:t.$emit("input",c.data.payload),console.log("payload path",c.data.payload),t.$emit("change"),n.next=50;break;case 47:n.prev=47,n.t3=n.catch(26),console.log(n.t3);case 50:t.isLoading=!1,t.render=Date.now()+Math.floor(1e4*Math.random()+1);case 52:case"end":return n.stop()}}),n,null,[[26,47]])})))()},ValidateImageDimensions:function(e){var t=this;return new Promise((function(n,r){t.not_image&&n(!0);var o=new FileReader;o.onload=function(r){var img=new Image;img.onload=function(){img.width>t.image_width||img.height>t.image_height?(t.imageIssues="".concat(e.name,": Provided image dimension ").concat(img.height," * ").concat(img.width," are incorrect"),n(!1)):(t.imageIssues="",n(!0))},img.src=r.target.result},o.readAsDataURL(e)}))},ValidateImageSize:function(e){var t=this;return new Promise((function(n,r){t.not_image&&n(!0);var o=new FileReader;o.onload=function(r){var img=new Image;img.onload=function(){var r=1048576*t.image_size;e.size>r?(t.imageIssues="".concat(e.name,": Image size exceeds the maximum allowed size of ").concat(t.image_size," MB"),n(!1)):n(!0)},img.src=r.target.result},o.readAsDataURL(e)}))},OpenFileBrowser:function(){this.$refs.file.$el.querySelector("input").click()},RemoveImage:function(e){if(this.multiple){var t=Object(h.cloneDeep)(this.value);t.splice(e,1),this.$emit("input",t),this.$refs.file.reset()}else this.$emit("input",null),this.$refs.file.reset();this.$emit("change"),this.render=Date.now()+Math.floor(3e4*Math.random()+1)}},mounted:function(){this.$nextTick((function(){}))}},x=y,w=n(43),component=Object(w.a)(x,(function(){var e,t=this,n=t._self._c;return n("div",[n(c.a,{key:t.render,ref:"file",attrs:{"hide-input":"","prepend-icon":"",accept:t.filetype,multiple:t.multiple},on:{change:t.HandleFileUpload},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("div",{staticClass:"d-flex flex-column"},[n(l.a,{staticClass:"px-6 mb-2",attrs:{outlined:"",color:"blue",loading:t.isLoading,rounded:t.rounded_button_style},on:{click:t.OpenFileBrowser}},[n(d.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-text-box-outline")]),t._v("\n\t\t\t\t\t"+t._s(t.button_text)+"\n\t\t\t\t")],1),t._v(" "),t.no_hint?t._e():n("div",{staticClass:"v-text-field__details"},[n("div",{staticClass:"v-messages theme--light"},[n("div",{staticClass:"v-messages__wrapper"},[t.image_height&&t.image_width?n("div",{staticClass:"v-messages__message"},[t._v("\n\t\t\t\t\t\t\t\tRecommended "+t._s(t.image_height)+" * "+t._s(t.image_width)+"\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.image_size?n("div",{staticClass:"v-messages__message"},[t._v("\n\t\t\t\t\t\t\t\tRecommended size <= "+t._s(t.image_size)+" MB\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),n("div",{staticClass:"v-messages__message"},[t._v("Accepted file format: "+t._s(t.filetype))])])])]),t._v(" "),t.imageIssues||t.errorMessage?n("div",{staticClass:"v-messages theme--light error--text",attrs:{role:"alert"}},[n("div",{staticClass:"v-messages__wrapper"},[t.imageIssues?n("div",{staticClass:"v-messages__message"},[t._v(t._s(t.imageIssues))]):t._e(),t._v(" "),t.errorMessage?n("div",{staticClass:"v-messages__message"},[t._v(t._s(t.errorMessage))]):t._e()])]):t._e()],1)]},proxy:!0}])}),t._v(" "),!t.no_preview&&(t.value||null!==(e=t.value)&&void 0!==e&&e.length)?n("div",["object"==Object(f.a)(t.value)?n("div",{staticClass:"d-flex flex-wrap my-3 ml-3"},t._l(t.value,(function(e,l){return n(o.a,{key:l,staticClass:"mr-3",attrs:{avatar:"",overlap:"",bordered:"",color:"error",icon:"mdi-close"},nativeOn:{click:function(e){return t.RemoveImage(l)}}},[n(r.a,{staticClass:"rounded",attrs:{tile:"",size:"50"}},[n(m.a,{attrs:{src:e}})],1)],1)})),1):"string"==typeof t.value?n("div",{staticClass:"d-flex flex-wrap my-3 ml-3"},[n(o.a,{attrs:{icon:"mdi-close",bordered:"",overlap:"",color:"error"},nativeOn:{click:function(e){return t.RemoveImage.apply(null,arguments)}}},[n(r.a,{staticClass:"rounded",attrs:{tile:"",size:"50"}},[n(m.a,{attrs:{src:t.value}})],1)],1)],1):t._e()]):t._e()],1)}),[],!1,null,"7eec9609",null);t.default=component.exports}}]);