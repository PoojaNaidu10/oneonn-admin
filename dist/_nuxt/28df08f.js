(window.webpackJsonp=window.webpackJsonp||[]).push([[21,31],{712:function(e,t,r){"use strict";r.r(t);var n=r(219),l=r(940),o=r(656),d=r(947),c=r(184),m=r(175),v=r(18),f=r(144),_=r(28),h=(r(97),r(40),r(13),r(179),r(39),r(27),r(6),r(57),r(58),r(146)),y={data:function(){return{imageIssues:"",isLoading:!1,render:Date.now()+Math.floor(1e4*Math.random()+1)}},props:{image_width:{type:Number},image_height:{type:Number},errorMessage:{type:String},value:{type:Array|String},image_size:{type:Number,default:5},not_image:{type:Boolean,default:!1},no_hint:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},UploadAPI:{type:Function,required:!0},no_preview:{type:Boolean,default:!1},button_text:{type:String,default:"Upload image"},rounded_button_style:{type:Boolean,default:!1},filetype:{type:String|Array,default:"image/webp"}},methods:{HandleFileUpload:function(e){var t=this;return Object(_.a)(regeneratorRuntime.mark((function r(){var n,l,o,d,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.isLoading=!0,!t.multiple){r.next=10;break}return n=Object(h.map)(e,function(){var e=Object(_.a)(regeneratorRuntime.mark((function e(r){var n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ValidateImageDimensions(r);case 2:if(e.t0=e.sent,!e.t0){e.next=7;break}return e.next=6,t.ValidateImageSize(r);case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=22;break}return(n=new FormData).append("file",r,r.name),e.prev=10,e.next=13,t.UploadAPI(n);case 13:return l=e.sent,console.log("response nimage,",l),e.abrupt("return",l.data.payload.imageUrl);case 18:return e.prev=18,e.t1=e.catch(10),console.log(e.t1),e.abrupt("return",null);case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()),r.next=5,Promise.all(n);case 5:l=(l=r.sent).filter((function(e){return null!==e})),t.value?(t.$emit("input",[].concat(Object(f.a)(t.value),Object(f.a)(l))),t.$emit("change")):(t.$emit("input",l),t.$emit("change")),r.next=50;break;case 10:if(console.log("else conditon"),!e){r.next=50;break}return console.log("if files else"),r.next=15,t.ValidateImageDimensions(e);case 15:if(r.t0=r.sent,!r.t0){r.next=20;break}return r.next=19,t.ValidateImageSize(e);case 19:r.t0=r.sent;case 20:if(!r.t0){r.next=50;break}return console.log("if inside funtion"),o=new FormData,console.log("if inside funtion11"),o.append("file",e,e.name),console.log("if inside funtion 22",e.name),r.prev=26,r.next=29,t.UploadAPI(o);case 29:d=r.sent,console.log("if inside funtion 33"),r.t1=regeneratorRuntime.keys(d.data.payload);case 32:if((r.t2=r.t1()).done){r.next=42;break}if(c=r.t2.value,console.log("if inside funtion 44",d.data.payload),0==d.data.payload[c].length||"message"==c){r.next=40;break}return console.log("if inside funtion 44",d.data.payload[c].length),t.$emit("error",d.data.payload),console.log("if inside funtion 55",d.data.payload),r.abrupt("break",42);case 40:r.next=32;break;case 42:t.$emit("input",d.data.payload),console.log("payload path",d.data.payload),t.$emit("change"),r.next=50;break;case 47:r.prev=47,r.t3=r.catch(26),console.log(r.t3);case 50:t.isLoading=!1,t.render=Date.now()+Math.floor(1e4*Math.random()+1);case 52:case"end":return r.stop()}}),r,null,[[26,47]])})))()},ValidateImageDimensions:function(e){var t=this;return new Promise((function(r,n){t.not_image&&r(!0);var l=new FileReader;l.onload=function(n){var img=new Image;img.onload=function(){img.width>t.image_width||img.height>t.image_height?(t.imageIssues="".concat(e.name,": Provided image dimension ").concat(img.height," * ").concat(img.width," are incorrect"),r(!1)):(t.imageIssues="",r(!0))},img.src=n.target.result},l.readAsDataURL(e)}))},ValidateImageSize:function(e){var t=this;return new Promise((function(r,n){t.not_image&&r(!0);var l=new FileReader;l.onload=function(n){var img=new Image;img.onload=function(){var n=1048576*t.image_size;e.size>n?(t.imageIssues="".concat(e.name,": Image size exceeds the maximum allowed size of ").concat(t.image_size," MB"),r(!1)):r(!0)},img.src=n.target.result},l.readAsDataURL(e)}))},OpenFileBrowser:function(){this.$refs.file.$el.querySelector("input").click()},RemoveImage:function(e){if(this.multiple){var t=Object(h.cloneDeep)(this.value);t.splice(e,1),this.$emit("input",t),this.$refs.file.reset()}else this.$emit("input",null),this.$refs.file.reset();this.$emit("change"),this.render=Date.now()+Math.floor(3e4*Math.random()+1)}},mounted:function(){this.$nextTick((function(){}))}},w=y,x=r(43),component=Object(x.a)(w,(function(){var e,t=this,r=t._self._c;return r("div",[r(d.a,{key:t.render,ref:"file",attrs:{"hide-input":"","prepend-icon":"",accept:t.filetype,multiple:t.multiple},on:{change:t.HandleFileUpload},scopedSlots:t._u([{key:"append-outer",fn:function(){return[r("div",{staticClass:"d-flex flex-column"},[r(o.a,{staticClass:"px-6 mb-2",attrs:{outlined:"",color:"blue",loading:t.isLoading,rounded:t.rounded_button_style},on:{click:t.OpenFileBrowser}},[r(c.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-text-box-outline")]),t._v("\n\t\t\t\t\t"+t._s(t.button_text)+"\n\t\t\t\t")],1),t._v(" "),t.no_hint?t._e():r("div",{staticClass:"v-text-field__details"},[r("div",{staticClass:"v-messages theme--light"},[r("div",{staticClass:"v-messages__wrapper"},[t.image_height&&t.image_width?r("div",{staticClass:"v-messages__message"},[t._v("\n\t\t\t\t\t\t\t\tRecommended "+t._s(t.image_height)+" * "+t._s(t.image_width)+"\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.image_size?r("div",{staticClass:"v-messages__message"},[t._v("\n\t\t\t\t\t\t\t\tRecommended size <= "+t._s(t.image_size)+" MB\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),r("div",{staticClass:"v-messages__message"},[t._v("Accepted file format: "+t._s(t.filetype))])])])]),t._v(" "),t.imageIssues||t.errorMessage?r("div",{staticClass:"v-messages theme--light error--text",attrs:{role:"alert"}},[r("div",{staticClass:"v-messages__wrapper"},[t.imageIssues?r("div",{staticClass:"v-messages__message"},[t._v(t._s(t.imageIssues))]):t._e(),t._v(" "),t.errorMessage?r("div",{staticClass:"v-messages__message"},[t._v(t._s(t.errorMessage))]):t._e()])]):t._e()],1)]},proxy:!0}])}),t._v(" "),!t.no_preview&&(t.value||null!==(e=t.value)&&void 0!==e&&e.length)?r("div",["object"==Object(v.a)(t.value)?r("div",{staticClass:"d-flex flex-wrap my-3 ml-3"},t._l(t.value,(function(e,o){return r(l.a,{key:o,staticClass:"mr-3",attrs:{avatar:"",overlap:"",bordered:"",color:"error",icon:"mdi-close"},nativeOn:{click:function(e){return t.RemoveImage(o)}}},[r(n.a,{staticClass:"rounded",attrs:{tile:"",size:"50"}},[r(m.a,{attrs:{src:e}})],1)],1)})),1):"string"==typeof t.value?r("div",{staticClass:"d-flex flex-wrap my-3 ml-3"},[r(l.a,{attrs:{icon:"mdi-close",bordered:"",overlap:"",color:"error"},nativeOn:{click:function(e){return t.RemoveImage.apply(null,arguments)}}},[r(n.a,{staticClass:"rounded",attrs:{tile:"",size:"50"}},[r(m.a,{attrs:{src:t.value}})],1)],1)],1):t._e()]):t._e()],1)}),[],!1,null,"7eec9609",null);t.default=component.exports},954:function(e,t,r){"use strict";r.r(t);var n=r(656),l=r(675),o=r(674),d=r(703),c=r(735),m=r(184),v=r(948),f=r(946),_=r(753),h=r(949),y=(r(9),r(13),r(16),r(17),r(11),r(6),r(12),r(18)),w=r(28),x=r(3),k=(r(97),r(146)),I=r(145),R=r(119),C=r(120);new I.a;var O={addReview:function(data){return R.a.buildPostRequest(C.a.ADDREVIEW,data)},upload_image:function(data){return R.a.buildFilePostRequest(C.a.UPLOADREVIEWIMAGE,data)},updateReview:function(data){return R.a.buildPutRequestWithData(C.a.UPDATEREVIEW,data)},deleteReview:function(data){return R.a.buildPutRequestWithData(C.a.DELETEREVIEW,data)}};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){Object(x.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A={data:function(){return{ReviewAPI:O,isValid:!1,payload:{rating:0,title:"",review:"",seller_id:"",user_name:"",product_id:"",image_list:[]},errorMessages:{image_list:"",rating:""},rules:{required:function(e){return!!e||"This field is required"}}}},watch:{edit:{handler:function(e,t){e?(this.payload=j(j({},this.payload),this.content),this.payload.tag_id=this.content._id,delete this.payload.__v,delete this.payload._id,delete this.payload.createdAt,delete this.payload.updatedAt):this.ResetForm()},immediate:!0}},props:{content:{type:Object},edit:{type:Boolean,default:!1},seller_id:{type:String,required:!0},product_id:{type:String,required:!0}},methods:{AddEditData:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){var r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.validate(),n=e.isImagesValidated(["image_list"]),e.payload.rating?(e.errorMessages.rating="",r=!1):(e.errorMessages.rating="This is required",r=!0),!(e.isValid&&n&&r)){t.next=22;break}if(t.prev=4,!e.edit){t.next=8;break}t.next=13;break;case 8:return e.payload.seller_id=e.seller_id,e.payload.product_id=e.product_id,t.next=12,O.addReview(e.payload);case 12:l=t.sent;case 13:l.data.status.status_code?e.$store.dispatch("ActivateSnackBar",{state:!0,color:"red darken-4",msg:l.data.status.message}):e.$store.dispatch("ActivateSnackBar",{state:!0,color:"green darken-4",msg:"Item ".concat(e.edit?"Updated":"Added"," Successfully")}),e.ResetForm(),e.$emit("change"),e.$emit("close"),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[4,19]])})))()},isImagesValidated:function(e){var t=this,r=!0;return Object(k.map)(e,(function(e){if("string"==typeof t.payload[e])t.errorMessages[e]=t.payload[e]?"":"This is required",r=r&&!!t.payload[e];else if("object"===Object(y.a)(t.payload[e])){var n,l;t.errorMessages[e]=null!==(n=t.payload[e])&&void 0!==n&&n.length?"":"This is required",r=r&&!(null===(l=t.payload[e])||void 0===l||!l.length)}})),r},ResetForm:function(){var e;this.payload={rating:0,title:"",review:"",seller_id:"",user_name:"",product_id:"",image_list:[]},null===(e=this.$refs)||void 0===e||null===(e=e.form)||void 0===e||e.resetValidation()},CloseForm:function(){this.edit&&(this.ResetForm(),this.$emit("close_edit")),this.$emit("close")}},mounted:function(){this.$nextTick((function(){}))}},D=r(43),component=Object(D.a)(A,(function(){var e=this,t=e._self._c;return t(l.a,{staticClass:"pa-4"},[t(f.a,[t(d.a,{staticClass:"text-center"},[t("span",{staticClass:"text-h5"},[e._v(e._s(e.edit?"Edit":"Add")+" Review Information")])]),e._v(" "),t(d.a,{staticClass:"text-right",attrs:{cols:"2"}},[t(n.a,{attrs:{icon:""},on:{click:e.CloseForm}},[t(m.a,[e._v("mdi-close")])],1)],1)],1),e._v(" "),t(o.b,[t(c.a,{ref:"form",model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[t(f.a,[t(d.a,{attrs:{cols:"6"}},[t("label",[e._v("Username"),t("span",{staticClass:"red--text"},[e._v("*")])]),e._v(" "),t(_.a,{attrs:{outlined:"",rules:[e.rules.required],placeholder:"Enter username"},model:{value:e.payload.user_name,callback:function(t){e.$set(e.payload,"user_name",t)},expression:"payload.user_name"}})],1),e._v(" "),t(d.a,{attrs:{cols:"6"}},[t("label",[e._v("Title"),t("span",{staticClass:"red--text"},[e._v("*")])]),e._v(" "),t(_.a,{attrs:{outlined:"",rules:[e.rules.required],placeholder:"Enter review title"},model:{value:e.payload.title,callback:function(t){e.$set(e.payload,"title",t)},expression:"payload.title"}})],1),e._v(" "),t(d.a,{attrs:{cols:"6"}},[t("label",{staticClass:"required"},[e._v("Rating")]),e._v(" "),t(v.a,{attrs:{hover:"",size:"35",length:"5",color:"orange lighten-1"},model:{value:e.payload.rating,callback:function(t){e.$set(e.payload,"rating",t)},expression:"payload.rating"}}),e._v(" "),e.errorMessages.rating?t("sup",{staticClass:"red--text"},[e._v(" "+e._s(e.errorMessages.rating)+" ")]):e._e()],1),e._v(" "),t(d.a,{attrs:{cols:"6"}},[t("label",[e._v("Attachments "),t("sup",{staticClass:"red--text"},[e._v("*")])]),e._v(" "),t("FormElementsFileInput",{attrs:{multiple:"",image_width:1920,image_height:670,errorMessage:e.errorMessages.image_list,UploadAPI:e.ReviewAPI.upload_image},on:{change:function(t){return e.isImagesValidated(["image_list"])}},model:{value:e.payload.image_list,callback:function(t){e.$set(e.payload,"image_list",t)},expression:"payload.image_list"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12"}},[t("label",[e._v("Review "),t("sup",{staticClass:"red--text"},[e._v("*")])]),e._v(" "),t(h.a,{attrs:{outlined:"",rules:[e.rules.required],placeholder:"Enter review"},model:{value:e.payload.review,callback:function(t){e.$set(e.payload,"review",t)},expression:"payload.review"}})],1)],1),e._v(" "),t("small",[e._v("*indicates required field")])],1)],1),e._v(" "),t(o.a,[t("div",{staticClass:"mx-auto mt-3"},[t(n.a,{staticClass:"mr-2 white--text",attrs:{color:"grey"},on:{click:e.CloseForm}},[e._v(" Cancel ")]),e._v(" "),t(n.a,{staticClass:"mr-2 white--text",attrs:{color:"design"},on:{click:e.AddEditData}},[e._v("\n\t\t\t\t"+e._s(e.edit?"Update":"Submit")+"\n\t\t\t")])],1)])],1)}),[],!1,null,"02748992",null);t.default=component.exports;installComponents(component,{FormElementsFileInput:r(712).default})}}]);